<!DOCTYPE html>
<html>
<head>
    <title>Demo Betting WebApp</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: Arial; text-align: center; margin: 0; padding: 0; background: #1e1e2f; color: #fff; }
        h1 { margin-top: 20px; }
        #balance { font-size: 22px; margin: 15px 0; }
        .btn { padding: 15px 25px; margin: 10px; font-size: 18px; border: none; border-radius: 10px; cursor: pointer; transition: 0.2s; }
        .btn:hover { opacity: 0.8; }
        .win { background-color: #4CAF50; color: white; }
        .lose { background-color: #f44336; color: white; }
        #history, #leaderboard { margin-top: 20px; font-size: 16px; max-height: 200px; overflow-y: auto; text-align: left; padding: 0 20px; }
    </style>
</head>
<body>

<h1>ðŸŽ² Demo Betting WebApp</h1>
<p>Play with demo coins. No real money!</p>

<div id="balance">Balance: ...</div>

<div>
    <button class="btn win" onclick="bet(100)">Bet 100</button>
    <button class="btn win" onclick="bet(200)">Bet 200</button>
    <button class="btn lose" onclick="bet(500)">Bet 500</button>
</div>

<h3>History</h3>
<div id="history"></div>

<h3>Leaderboard</h3>
<div id="leaderboard"></div>

<script>
const API = "http://YOUR_SERVER_IP:5000";
const user_id = Math.floor(Math.random()*1000000); // replace with Telegram user_id if available
let balance = 0;
let history = [];

async function fetchBalance() {
    const res = await fetch(API + "/api/get_coins", {
        method:"POST", headers:{"Content-Type":"application/json"},
        body: JSON.stringify({user_id})
    });
    const data = await res.json();
    balance = data.coins;
    document.getElementById("balance").innerText = "Balance: "+balance+" ðŸ’°";
}

async function bet(amount) {
    let win = Math.random() < 0.5;
    let delta = win ? amount : -amount;
    balance += delta;
    history.unshift(win ? `ðŸŽ‰ Won ${amount}` : `ðŸ’€ Lost ${amount}`);
    if(history.length>10) history.pop();
    document.getElementById("history").innerHTML = history.join("<br>");

    // Update server
    const res = await fetch(API + "/api/update_coins", {
        method:"POST", headers:{"Content-Type":"application/json"},
        body: JSON.stringify({user_id, delta})
    });
    const data = await res.json();
    document.getElementById("balance").innerText = "Balance: "+data.balance+" ðŸ’°";

    // Update leaderboard
    const board = data.leaderboard.map((u,i)=>`${i+1}. User${u[0]}: ${u[1]} ðŸ’°`).join("<br>");
    document.getElementById("leaderboard").innerHTML = board;
}

fetchBalance();
</script>

</body>
</html>
